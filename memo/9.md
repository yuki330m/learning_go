# 9章memo

## ライブラリ管理

- ライブラリは大きい単位順でリポジトリ、モジュール、パッケージの3つの概念を使って表される
  - リポジトリ
    - プロジェクトのソースコードが保存される場所で、バージョン管理システムが備わっている
  - モジュール
    - Goのライブラリあるいは、アプリケーションのルート
    - リポジトリに2個以上のルートを保存することは可能ではあるが非推奨
      - モジュール内のすべてが同じバージョンを持つことになるため
- 標準ライブラリ外のパッケージをのコードを使用する場合は、事前に自分にプロジェクトをモジュールとして宣言する必要がある

## モジュール

- `go mod init MODULE_PATH`でモジュールを作成でき、このコマンドを実行した場所がモジュールのルートになる
  - MODUKE_PATHは公開予定の場合は「github.com/モジュール名」のようにリポジトリの場所と機能を表す名称を持つ
  - MODUKE_PATHは非公開予定の場合は「会社名/モジュール名」のように他のプロジェクト名とかぶらない名前にする

## パッケージの構築

- パッケージの外側で使用したいものに関しては、先頭文字を大文字にすることで、外部に公開した事を表す
  - 小文字や_で始まるものに関してはパッケージ内の利用しかできない
- 一般的にパッケージ名とディレクトリ名は同じにする
- パッケージの命名は、内容を表現しているものにし、パッケージ名と関数名をかぶらせるのは避けるべき
- パッケージの循環参照は認められていないため、パッケージを分けるか、一つにするかの選択が必要になる
- パッケージを外部からダウンロードする場合は`go mod tidy`でダウンロードできる
  - 取得先は、googleが管理しているサーバーから取得される
  - 直接取得したい場合は、環境変数`GOPROXY`をdirectに設定することで可能

## init

- init関数を定義することで、そのパッケージが外部から参照されたタイミングで実行される関数を定義することができる
- init関数は複数定義することが可能ではあるが、一つに絞ったほうが可読性が向上する
- init関数がファイルをロードしたり、ネットワークアクセスしたりする場合は、ドキュメントに記載するのが望ましい